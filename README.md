# StoryValut (Yii2 + Docker)

## üöÄ –ó–∞–ø—É—Å–∫ (Docker)

### 1)
git clone <repo>
cd storyvalut

## –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

docker compose up -d --build
docker compose exec php composer install
docker compose exec php php yii migrate

## (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ hosts
127.0.0.1 storyvalut.loc

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://storyvalut.loc/
MailHog (–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∏—Å–µ–º): http://localhost:8025/

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞

StoryForm ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
StoryService ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ / —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ / —É–¥–∞–ª–µ–Ω–∏–µ, rate limit, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–æ–∫
StoryRepository ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î
MailService ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º —á–µ—Ä–µ–∑ SMTP
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è ¬´—Ç–æ–Ω–∫–∏–º¬ª

## ‚è± –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
7 —á–∞—Å–æ–≤ 30 –º–∏–Ω—É—Ç

## üîß –ß—Ç–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —É–ª—É—á—à–∏—Ç—å

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è, –Ω–æ –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ä–∞–∑–≤–∏—Ç–∏–∏ —è –±—ã —É–ª—É—á—à–∏–ª —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π (User ‚Üí Story)**

  * –°–µ–π—á–∞—Å –∞–≤—Ç–æ—Ä –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ IP.
  * –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –ª–æ–≥–∏—á–Ω–µ–µ –≤—ã–¥–µ–ª–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç—å `User` –∏ —Å–≤—è–∑–∞—Ç—å `Story ‚Üí User`.
  * –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:

    * –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∞ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç IP,
    * –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é / OAuth / social login.

2. **–£—Å–∏–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (clean architecture / DDD-–ø–æ–¥—Ö–æ–¥)**

  * –°–µ–π—á–∞—Å —á–∞—Å—Ç—å –ª–æ–≥–∏–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ ActiveRecord.
  * –ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Å–ª–æ–∏:

    * `Domain` (Story, User ‚Äî –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç–∏),
    * `Application` (StoryService ‚Äî use cases),
    * `Infrastructure` (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—á—Ç—ã).
  * –ü—Ä–∏–Ω—Ü–∏–ø: **"one action ‚Äî one controller use case"**.

3. **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

  * –î–æ–±–∞–≤–∏—Ç—å structured-–ª–æ–≥–∏ (JSON) –¥–ª—è:

    * —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤,
    * –ø–æ–ø—ã—Ç–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ –æ–∫–Ω–∞ 12h,
    * –Ω–∞—Ä—É—à–µ–Ω–∏–π rate-limit.
    * –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç—ã –º–∞–µ–ª —Å–µ—Ä–≤–∏—Å–∞
  * –≠—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –∞—É–¥–∏—Ç –∏ –æ—Ç–ª–∞–¥–∫—É.

4. **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**

  * Unit-—Ç–µ—Å—Ç—ã: StoryService –∏ StoryRepository.
  * Integration: —Ñ–æ—Ä–º–∞ + –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (—á–µ—Ä–µ–∑ Codeception).
  * Snapshot-—Ç–µ—Å—Ç—ã email-—à–∞–±–ª–æ–Ω–æ–≤.
